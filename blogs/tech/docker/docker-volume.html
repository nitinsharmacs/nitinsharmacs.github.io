<!DOCTYPE html>
<html lang="en"><head><title>Docker Volume</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM Plex Mono&amp;family=Schibsted Grotesk:wght@400;700&amp;family=Source Sans Pro:ital,wght@0,400;0,600;1,400;1,600&amp;display=swap"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:title" content="Docker Volume"/><meta property="og:description" content="Understanding Docker Volume Thoroughly Agenda Abstract Container layer and its data on docker host machine What are the flaws of storing data in the container layer? What is the solution? ..."/><meta property="og:image" content="https://nitinsharmacs.github.io/static/og-image.png"/><meta property="og:width" content="1200"/><meta property="og:height" content="675"/><link rel="icon" href="../../../static/icon.png"/><meta name="description" content="Understanding Docker Volume Thoroughly Agenda Abstract Container layer and its data on docker host machine What are the flaws of storing data in the container layer? What is the solution? ..."/><meta name="generator" content="Quartz"/><link href="../../../index.css" rel="stylesheet" type="text/css" spa-preserve/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" rel="stylesheet" type="text/css" spa-preserve/><script src="../../../prescript.js" type="application/javascript" spa-preserve></script><script type="application/javascript" spa-preserve>const fetchData = fetch("../../../static/contentIndex.json").then(data => data.json())</script></head><body data-slug="blogs/tech/docker/docker-volume"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../../..">bitPhile</a></h2><div class="spacer mobile-only"></div><div class="search"><button class="search-button" id="search-button"><p>Search</p><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg></button><div id="search-container"><div id="search-space"><input autocomplete="off" id="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div id="search-layout" data-preview="true"></div></div></div></div><button class="darkmode" id="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button><div class="explorer desktop-only"><button type="button" id="explorer" data-behavior="collapse" data-collapsed="collapsed" data-savestate="true" data-tree="[{&quot;path&quot;:&quot;blogs&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;blogs/tech&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;blogs/tech/docker&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;blogs/tech/programming&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;blogs/tech/programming/scala&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/aws&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/CPython&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/CPython/logging&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/CPython/python-bindings&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/dask&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/environment-modules&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/gitlab&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/googleapis&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/jax&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/linux&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/numpy&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/singularity&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/xarray&quot;,&quot;collapsed&quot;:true},{&quot;path&quot;:&quot;notes/xarray-cuda&quot;,&quot;collapsed&quot;:true}]" aria-controls="explorer-content" aria-expanded="false"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-content"><ul class="overflow" id="explorer-ul"><li><div class="folder-outer open"><ul style="padding-left:0;" class="content" data-folderul><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="blogs"><button class="folder-button"><span class="folder-title">blogs</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="blogs"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="blogs/tech"><button class="folder-button"><span class="folder-title">tech</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="blogs/tech"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="blogs/tech/docker"><button class="folder-button"><span class="folder-title">docker</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="blogs/tech/docker"><li><a href="../../../blogs/tech/docker/docker-compose-todo-app" data-for="blogs/tech/docker/docker-compose-todo-app">Docker Compose Todo App</a></li><li><a href="../../../blogs/tech/docker/docker-image-layers" data-for="blogs/tech/docker/docker-image-layers">Docker Image Layers</a></li><li><a href="../../../blogs/tech/docker/docker-networking" data-for="blogs/tech/docker/docker-networking">Docker Networking - How does it work?</a></li><li><a href="../../../blogs/tech/docker/docker-volume" data-for="blogs/tech/docker/docker-volume">Docker Volume</a></li><li><a href="../../../blogs/tech/docker/docker-storage-driver" data-for="blogs/tech/docker/docker-storage-driver">docker-storage-driver</a></li><li><a href="../../../blogs/tech/docker/getting-started-with-docker" data-for="blogs/tech/docker/getting-started-with-docker">Getting Started With Docker</a></li><li><a href="../../../blogs/tech/docker/docker-compose" data-for="blogs/tech/docker/docker-compose">Introduction to Docker Compose</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="blogs/tech/programming"><button class="folder-button"><span class="folder-title">programming</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="blogs/tech/programming"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="blogs/tech/programming/scala"><button class="folder-button"><span class="folder-title">scala</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="blogs/tech/programming/scala"><li><a href="../../../blogs/tech/programming/scala/chat-app-in-scala-armeria" data-for="blogs/tech/programming/scala/chat-app-in-scala-armeria">Chat App in Scala Armeria</a></li></ul></div></li></ul></div></li></ul></div></li></ul></div></li><li><div class="folder-outer "><ul style="padding-left:0;" class="content" data-folderul></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes"><button class="folder-button"><span class="folder-title">notes</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/aws"><button class="folder-button"><span class="folder-title">aws</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/aws"><li><a href="../../../notes/aws/aws-cli-setup-sso" data-for="notes/aws/aws-cli-setup-sso">aws-cli-setup-sso</a></li><li><a href="../../../notes/aws/email-notification-lambda" data-for="notes/aws/email-notification-lambda">email-notification-lambda</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/CPython"><button class="folder-button"><span class="folder-title">CPython</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/CPython"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/CPython/logging"><button class="folder-button"><span class="folder-title">logging</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/CPython/logging"><li><a href="../../../notes/CPython/logging/basicConfig" data-for="notes/CPython/logging/basicConfig">basicConfig</a></li><li><a href="../../../notes/CPython/logging/logrecord-attributes" data-for="notes/CPython/logging/logrecord-attributes">logrecord-attributes</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/CPython/python-bindings"><button class="folder-button"><span class="folder-title">python-bindings</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/CPython/python-bindings"><li><a href="../../../notes/CPython/python-bindings/marshalling" data-for="notes/CPython/python-bindings/marshalling">marshalling</a></li><li><a href="../../../notes/CPython/python-bindings/using-ctype" data-for="notes/CPython/python-bindings/using-ctype">using-ctype</a></li></ul></div></li><li><a href="../../../notes/CPython/Asyc-Server" data-for="notes/CPython/Asyc-Server">Asyc Server</a></li><li><a href="../../../notes/CPython/Async-IO" data-for="notes/CPython/Async-IO">Async IO</a></li><li><a href="../../../notes/CPython/asyncio" data-for="notes/CPython/asyncio">asyncio</a></li><li><a href="../../../notes/CPython/dis" data-for="notes/CPython/dis">dis</a></li><li><a href="../../../notes/CPython/event-loop" data-for="notes/CPython/event-loop">event-loop</a></li><li><a href="../../../notes/CPython/executor" data-for="notes/CPython/executor">executor</a></li><li><a href="../../../notes/CPython/generators" data-for="notes/CPython/generators">generators</a></li><li><a href="../../../notes/CPython/gil" data-for="notes/CPython/gil">gil</a></li><li><a href="../../../notes/CPython/interned-objects" data-for="notes/CPython/interned-objects">interned-objects</a></li><li><a href="../../../notes/CPython/itertools" data-for="notes/CPython/itertools">itertools</a></li><li><a href="../../../notes/CPython/memory-management" data-for="notes/CPython/memory-management">memory-management</a></li><li><a href="../../../notes/CPython/multi-threading" data-for="notes/CPython/multi-threading">multi-threading</a></li><li><a href="../../../notes/CPython/mutex-lock" data-for="notes/CPython/mutex-lock">mutex-lock</a></li><li><a href="../../../notes/CPython/names-not-variables" data-for="notes/CPython/names-not-variables">names-not-variables</a></li><li><a href="../../../notes/CPython/opencv-python" data-for="notes/CPython/opencv-python">opencv-python</a></li><li><a href="../../../notes/CPython/package" data-for="notes/CPython/package">package</a></li><li><a href="../../../notes/CPython/Pandas" data-for="notes/CPython/Pandas">Pandas</a></li><li><a href="../../../notes/CPython/pickle" data-for="notes/CPython/pickle">pickle</a></li><li><a href="../../../notes/CPython/poetry" data-for="notes/CPython/poetry">poetry</a></li><li><a href="../../../notes/CPython/pyobject" data-for="notes/CPython/pyobject">pyobject</a></li><li><a href="../../../notes/CPython/Python" data-for="notes/CPython/Python">Python</a></li><li><a href="../../../notes/CPython/python-loops" data-for="notes/CPython/python-loops">python-loops</a></li><li><a href="../../../notes/CPython/re" data-for="notes/CPython/re">re</a></li><li><a href="../../../notes/CPython/References" data-for="notes/CPython/References">References</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/dask"><button class="folder-button"><span class="folder-title">dask</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/dask"><li><a href="../../../notes/dask/chunking" data-for="notes/dask/chunking">chunking</a></li><li><a href="../../../notes/dask/compute-function" data-for="notes/dask/compute-function">compute-function</a></li><li><a href="../../../notes/dask/dask-delayed" data-for="notes/dask/dask-delayed">dask-delayed</a></li><li><a href="../../../notes/dask/dask-graph" data-for="notes/dask/dask-graph">dask-graph</a></li><li><a href="../../../notes/dask/dask-so-far" data-for="notes/dask/dask-so-far">dask-so-far</a></li><li><a href="../../../notes/dask/get-method" data-for="notes/dask/get-method">get-method</a></li><li><a href="../../../notes/dask/local-cluster" data-for="notes/dask/local-cluster">local-cluster</a></li><li><a href="../../../notes/dask/map-blocks" data-for="notes/dask/map-blocks">map-blocks</a></li><li><a href="../../../notes/dask/scheduler" data-for="notes/dask/scheduler">scheduler</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/environment-modules"><button class="folder-button"><span class="folder-title">environment-modules</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/environment-modules"><li><a href="../../../notes/environment-modules/modules" data-for="notes/environment-modules/modules">modules</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/gitlab"><button class="folder-button"><span class="folder-title">gitlab</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/gitlab"><li><a href="../../../notes/gitlab/ci" data-for="notes/gitlab/ci">ci</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/googleapis"><button class="folder-button"><span class="folder-title">googleapis</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/googleapis"><li><a href="../../../notes/googleapis/delete-rows" data-for="notes/googleapis/delete-rows">delete-rows</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/jax"><button class="folder-button"><span class="folder-title">jax</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/jax"><li><a href="../../../notes/jax/jax" data-for="notes/jax/jax">jax</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/linux"><button class="folder-button"><span class="folder-title">linux</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/linux"><li><a href="../../../notes/linux/accessing-usb-drives" data-for="notes/linux/accessing-usb-drives">accessing-usb-drives</a></li><li><a href="../../../notes/linux/automount-drives" data-for="notes/linux/automount-drives">automount-drives</a></li><li><a href="../../../notes/linux/resources" data-for="notes/linux/resources">resources</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/numpy"><button class="folder-button"><span class="folder-title">numpy</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/numpy"><li><a href="../../../notes/numpy/broadcasting" data-for="notes/numpy/broadcasting">broadcasting</a></li><li><a href="../../../notes/numpy/indexing" data-for="notes/numpy/indexing">indexing</a></li><li><a href="../../../notes/numpy/internal-organization" data-for="notes/numpy/internal-organization">internal-organization</a></li><li><a href="../../../notes/numpy/interp" data-for="notes/numpy/interp">interp</a></li><li><a href="../../../notes/numpy/newaxis" data-for="notes/numpy/newaxis">newaxis</a></li><li><a href="../../../notes/numpy/pad" data-for="notes/numpy/pad">pad</a></li><li><a href="../../../notes/numpy/see-also" data-for="notes/numpy/see-also">see-also</a></li><li><a href="../../../notes/numpy/transpose" data-for="notes/numpy/transpose">transpose</a></li><li><a href="../../../notes/numpy/vectorize" data-for="notes/numpy/vectorize">vectorize</a></li><li><a href="../../../notes/numpy/view" data-for="notes/numpy/view">view</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/singularity"><button class="folder-button"><span class="folder-title">singularity</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/singularity"><li><a href="../../../notes/singularity/container-fs" data-for="notes/singularity/container-fs">container-fs</a></li><li><a href="../../../notes/singularity/definition-file-sections" data-for="notes/singularity/definition-file-sections">definition-file-sections</a></li><li><a href="../../../notes/singularity/defintion-file-header" data-for="notes/singularity/defintion-file-header">defintion-file-header</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/xarray"><button class="folder-button"><span class="folder-title">xarray</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/xarray"><li><a href="../../../notes/xarray/apply_ufunc" data-for="notes/xarray/apply_ufunc">apply_ufunc</a></li><li><a href="../../../notes/xarray/apply_ufunc-dask" data-for="notes/xarray/apply_ufunc-dask">apply_ufunc-dask</a></li><li><a href="../../../notes/xarray/apply_ufunc-dask-vectorize" data-for="notes/xarray/apply_ufunc-dask-vectorize">apply_ufunc-dask-vectorize</a></li><li><a href="../../../notes/xarray/core-dimensions" data-for="notes/xarray/core-dimensions">core-dimensions</a></li><li><a href="../../../notes/xarray/loop-dimensions" data-for="notes/xarray/loop-dimensions">loop-dimensions</a></li><li><a href="../../../notes/xarray/map_blocks" data-for="notes/xarray/map_blocks">map_blocks</a></li><li><a href="../../../notes/xarray/xarray-so-far" data-for="notes/xarray/xarray-so-far">xarray-so-far</a></li><li><a href="../../../notes/xarray/xarray-with-dask" data-for="notes/xarray/xarray-with-dask">xarray-with-dask</a></li></ul></div></li><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div data-folderpath="notes/xarray-cuda"><button class="folder-button"><span class="folder-title">xarray-cuda</span></button></div></div><div class="folder-outer "><ul style="padding-left:1.4rem;" class="content" data-folderul="notes/xarray-cuda"><li><a href="../../../notes/xarray-cuda/xarray-cuda" data-for="notes/xarray-cuda/xarray-cuda">xarray-cuda</a></li></ul></div></li><li><a href="../../../notes/elk-stack" data-for="notes/elk-stack">elk-stack</a></li></ul></div></li></ul></div></li><li id="explorer-end"></li></ul></div></div></div><div class="center"><div class="page-header"><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../blogs/">blogs</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../blogs/tech/">tech</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../blogs/tech/docker/">docker</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>Docker Volume</a></div></nav><h1 class="article-title">Docker Volume</h1><p show-comma="true" class="content-meta"><span>Mar 12, 2023</span><span>8 min read</span></p><ul class="tags"><li><a href="../../../tags/docker" class="internal tag-link">docker</a></li><li><a href="../../../tags/infra" class="internal tag-link">infra</a></li><li><a href="../../../tags/kubernetes" class="internal tag-link">kubernetes</a></li><li><a href="../../../tags/docker-volume" class="internal tag-link">docker-volume</a></li><li><a href="../../../tags/volume" class="internal tag-link">volume</a></li><li><a href="../../../tags/storage" class="internal tag-link">storage</a></li><li><a href="../../../tags/bind-mounts" class="internal tag-link">bind-mounts</a></li><li><a href="../../../tags/tmpfs" class="internal tag-link">tmpfs</a></li></ul></div></div><article class="popover-hint"><h1 id="understanding-docker-volume-thoroughly">Understanding Docker Volume Thoroughly<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#understanding-docker-volume-thoroughly" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h1>
<h2 id="agenda">Agenda<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#agenda" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li>Abstract</li>
<li>Container layer and its data on docker host machine</li>
<li>What are the flaws of storing data in the container layer?</li>
<li>What is the solution?</li>
<li>Using docker volume</li>
<li>Conclusion</li>
</ol>
<h2 id="abstract">Abstract<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#abstract" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>A Docker container is an independent process comprising the application and its dependencies. Container has its processes, file system, and networks independent of the host machine.</p>
<p>Creating a resource in the running container stores that resource in the Read-Write layer or Container layer. This is a temporary storage mechanism. It is accessible until the container is running. Once the container is removed, all the data goes.</p>
<p>Docker provides a few mechanisms to tackle this problem and volume is one of them. Let’s dig deeper into docker volumes.</p>
<blockquote>
<p>Note: All the examples are being done by using <code>minikube</code> for running docker daemon. Any mention of docker host machine refers to <code>minikube</code> node (You can go inside minikube node using, <code>minikube ssh</code>).</p>
</blockquote>
<h2 id="container-layer">Container Layer<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#container-layer" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>I have explained about <strong>container layer</strong> in my previous post on Docker at <a href="../../../blogs/tech/docker/docker-image-layers" class="internal alias" data-slug="blogs/tech/docker/docker-image-layers">Docker Image Layers</a>. In this section, we would be seeing where actually the container layer is stored on the docker host machine. Excited? Seems like yes 😄. Let’s start.</p>
<h3 id="where-does-the-container-layer-reside">Where does the container layer reside?<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#where-does-the-container-layer-reside" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Container layer is a read-write layer stacked on top of read-only image layers. We can’t modify read-only filesystem of read-only image layers. We can modify the contents in the file system of the container layer.</p>
<p>Let’s spin up an <code>alpine</code> container with <code>sh</code> command.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span></span></code></pre></figure>
<p>Creating a file as</p>
<pre><code>/ # echo &quot;Docker is awesome - Nitin&quot; > testimonials.txt
/ # ls
bin               home              mnt               root              srv               tmp
dev               lib               opt               run               sys               usr
etc               media             proc              sbin              testimonials.txt  var
</code></pre>
<p>Now, let’s see where this data is stored on the docker host machine.</p>
<p>Inspecting the above container of ID <code>385f23abffa3</code> gives the following</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --format</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> '{{ .GraphDriver.Data }}'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 385f23abffa3</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map[LowerDir:/var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032-init/diff:/var/lib/docker/overlay2/71129bf0c1fb93d386d1abd9390e68eb08b64e65cb31186a0e710931359adb72/diff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MergedDir:/var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032/merged</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UpperDir:/var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032/diff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WorkDir:/var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032/work]</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>Woo! It gives a map with a bunch of paths. Let me example you each of these paths. The following descriptions are based on <code>overlay2</code> storage driver.</p>
<ol>
<li><code>LowerDir</code> is the read-only file system for lower image layers. Any changes made to the file system are reflected in the new file system of the read-write container layer. <code>LowerDir</code> acts as a base file system.</li>
<li><code>UpperDir</code> is the read-write file system for the container layer where we can create and delete files and directories. Container layer changes are stored in this location.</li>
<li><code>MergedDir</code> is the merge of <code>LowerDir</code> and <code>UpperDir</code>. It gives a unified view of the file system for the container.</li>
<li><code>WorkDir</code> is something <code>overlay2</code> driver uses for its internal operations such as copy-on-write process.</li>
</ol>
<p>As you can see <code>LowerDir</code> has two paths separated by <code>:</code>.</p>
<p>First one is the path of the lower image layer read-only file system.</p>
<pre><code>/var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032-init/diff
</code></pre>
<p>Second one is the path of the lower image layer read-only file system after changes made by previous running containers.</p>
<pre><code>/var/lib/docker/overlay2/71129bf0c1fb93d386d1abd9390e68eb08b64e65cb31186a0e710931359adb72/diff
</code></pre>
<p>These two directories serve as a base read-only file system for the container layer read-write file system.</p>
<p>As we create a new file <code>testimonials.txt</code> in the container, let’s peek into <code>UpperDir</code> to see this new file. Remember, this is on the docker host machine.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032/diff</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">total</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwxr-xr-x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 06:45</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwx--x---</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 06:44</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwx------</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 06:44</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-rw-r--r--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   26</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 06:45</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testimonials.txt</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>Yay! We have <code>testimonials.txt</code> on our docker host machine. If we <code>cat</code> we see,</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pwd</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032/diff</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> testimonials.txt</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> awesome</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Nitin</span></span></code></pre></figure>
<p>Great. If you have noticed when we do <code>ls</code> inside the container, it gives more directories like,</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$:/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               home</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              mnt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              srv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               tmp</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               lib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               opt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               sys</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               usr</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">etc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               media</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             proc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              sbin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              testimonials.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  var</span></span></code></pre></figure>
<p>However, we didn’t see these directories on <code>UpperDir</code>. Guess why?</p>
<p>The reason is, <code>UpperDir</code> only has the changes made to the container file system. This is where <code>MergedDir</code> comes into existence which provides a unified view of the file system. <code>MergedDir</code> is the merge of <code>LowerDir</code> and <code>UpperDir</code> to give a unified file system.</p>
<p>Let’s see what is inside <code>MergedDir</code>.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/overlay2/7cb62392ec2ace2c1ea07bbdee8c4976105f4f081531a29b7c5a0320aa5ae032/merged</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  etc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   lib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    mnt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  proc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   srv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  testimonials.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  usr</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  home</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  media</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  opt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  sbin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  sys</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  tmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               var</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>As we can see it is the same as the file system of the container. You can go ahead and try creating files in this location and see if it turns up in the container.</p>
<h2 id="the-flaws-of-storing-data-in-the-container-layer">The Flaws of storing data in the container layer<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#the-flaws-of-storing-data-in-the-container-layer" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li>
<p>First thing first, storing data in the container layer is not permanent. Once you delete the container, all the data stored goes away.</p>
</li>
<li>
<p><code>storage-driver</code> is getting used to dealing with the file system on the container. Using container file system for an IO-intensive application is always not a good idea. It causes performance issues and increases latency when accessing files stored on a container file system.</p>
</li>
<li>
<p>Container size gets increase when we start to store files on the container file system. I would give the example of a use case. Sometimes we get the need to create an image from the container itself. And if we have a huge amount of data inside the container, the resulting image would be big.</p>
</li>
<li>
<p>Sharing of data across containers is hard as it is highly coupled with the container itself.</p>
</li>
</ol>
<p>These are the problems we are considering here. There may be different other problems.</p>
<p>Then what is the solution, huh?</p>
<h2 id="solution---using-docker-volume">Solution - Using Docker volume<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#solution---using-docker-volume" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>Volume is not the only solution. It is one of the solutions docker provides. Some other solutions are <code>bind mound</code>, <code>tmpfs</code> etc.</p>
<h3 id="what-is-docker-volume">What is Docker Volume?<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#what-is-docker-volume" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>This is the way of storing and managing persistent data outside of container file system. It is stored on a host file system managed by Docker. These volumes can be shared across different containers.</p>
<p>Cool, Huh?</p>
<h3 id="lets-create-a-volume">Let’s create a volume<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#lets-create-a-volume" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Volumes are not tied to containers. So, we can create and manage volumes without even touching containers.</p>
<p><code>docker volume</code> command is used to manage volumes.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Usage:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COMMAND</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volumes</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Commands:</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      Create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     Display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> detailed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> information</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volumes</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          List</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volumes</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  prune</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unused</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volumes</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          Remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> one</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volumes</span></span>
<span data-line> </span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 'docker volume COMMAND --help'</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> information</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> command.</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>Let’s create a volume of the name <code>bitphile</code>, 😁.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitphile</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bitphile</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DRIVER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    VOLUME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NAME</span></span>
<span data-line><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">local</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     bitphile</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>Inspecting this volume gives us,</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> volume</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitphile</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;CreatedAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2023-03-12T07:38:38Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;local&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Labels&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Mountpoint&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/lib/docker/volumes/bitphile/_data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bitphile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span data-line><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;Scope&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;local&quot;</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span data-line><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p><code>Mountpoint</code> is where this volume is mounted. That is the location on the host machine where volume data will be stored.</p>
<p>Let’s peek inside that location and see what’s there.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/volumes/bitphile/_data</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">total</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwxr-xr-x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:38</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwx-----x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:38</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>NOTHING? Well, we just created it 😂!</p>
<h3 id="mount-volume-to-container">Mount Volume to container<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mount-volume-to-container" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>There are two methods of mounting volume to the container.</p>
<ol>
<li><code>--mount</code> option</li>
<li><code>-v</code> option</li>
</ol>
<p><code>-v</code> option is like shorthand. <code>--mount</code> is verbose and explicit, which is why we going to use <code>--mount</code> throughout this post.</p>
<p>Let’s create a container and mount it to this volume we have just created.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type=volume,source=bitphile,target=/bitphile-vol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #</span></span></code></pre></figure>
<p><code>--mount</code> option takes parameters are <code>key=value</code> pairs separated by <code>,</code>.</p>
<ul>
<li><code>type</code> specifies the <code>volume</code> as type. <code>--mount</code> is being used by <code>bind mounts</code>, and <code>tmpfs</code> also. By default, <code>type</code> is <code>volume</code>. But for the sake of being explicit, I have used it.</li>
<li><code>source</code> is the volume name.</li>
<li><code>target</code> is the path in the container file system that will be mounted with the volume. There is alias of this option as <code>dest</code>, <code>destination</code> etc.</li>
</ul>
<p>Listing contents in the container file system <code>root</code> we see,</p>
<pre><code>/ # ls
bin           home          opt           sbin          usr
bitphile-vol  lib           proc          srv           var
dev           media         root          sys
etc           mnt           run           tmp
/ #
</code></pre>
<p>We have <code>bitphile-vol</code> directory mounted to volume <code>bitphile</code>.</p>
<p>Let’s create a file inside that directory.</p>
<pre><code>/ # echo Good morning > bitphile-vol/greetings.txt
/ # cat bitphile-vol/greetings.txt
Good morning
/ #
</code></pre>
<p>Peeking on the volume mount location on the host machine, we see,</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/docker/volumes/bitphile/_data</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">total</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwxr-xr-x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drwx-----x</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4096</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:38</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ..</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-rw-r--r--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   13</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 07:48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> greetings.txt</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span></span></code></pre></figure>
<p>Cool! We have <code>greetings.txt</code>.</p>
<h3 id="mount-the-same-volume-to-another-container">Mount the same volume to another container<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#mount-the-same-volume-to-another-container" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>Let’s spin up a new container with the same volume.</p>
<figure data-rehype-pretty-code-figure><pre tabindex="0" data-language="shell" data-theme="github-light github-dark"><code data-language="shell" data-theme="github-light github-dark" style="display:grid;"><span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bitphile-second</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source=bitphile,target=/bit-vol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ls</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      etc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      media</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    proc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     sbin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     tmp</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bit-vol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  home</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     mnt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     srv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      usr</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      lib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      opt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      sys</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      var</span></span>
<span data-line><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $</span></span></code></pre></figure>
<p>Let’s see what <code>bit-vol</code> has,</p>
<pre><code>/ # ls bit-vol
greetings.txt
/ # cat bit-vol/greetings.txt
Good morning
/ #
</code></pre>
<p>Nice.</p>
<h2 id="conclusion">Conclusion<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#conclusion" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>Finally, we are at the end (the happiest moment when the zoom meeting ends 😂).
So, docker volumes are used as one of the methods to store data permanently. There are some other methods of doing the same. We will have look at those sometime later.</p>
<p>Until then,</p>
<p><img src="../../../blogs/resources/bye-mr-bean.gif" alt="Bye by Mr Bean" title="Bye bye, see you on next post"/></p>
<h2 id="references">References<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#references" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ol>
<li><a href="https://docs.docker.com/storage/volumes" class="external">Docker Volumes<svg aria-hidden="true" class="external-icon" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></li>
</ol></article><hr/><div class="page-footer"></div></div><div class="right sidebar"><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div id="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false}"></div><button id="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div id="global-graph-outer"><div id="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true}"></div></div></div><div class="toc desktop-only"><button type="button" id="toc" class aria-controls="toc-content" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="toc-content" class><ul class="overflow"><li class="depth-0"><a href="#understanding-docker-volume-thoroughly" data-for="understanding-docker-volume-thoroughly">Understanding Docker Volume Thoroughly</a></li><li class="depth-1"><a href="#agenda" data-for="agenda">Agenda</a></li><li class="depth-1"><a href="#abstract" data-for="abstract">Abstract</a></li><li class="depth-1"><a href="#container-layer" data-for="container-layer">Container Layer</a></li><li class="depth-2"><a href="#where-does-the-container-layer-reside" data-for="where-does-the-container-layer-reside">Where does the container layer reside?</a></li><li class="depth-1"><a href="#the-flaws-of-storing-data-in-the-container-layer" data-for="the-flaws-of-storing-data-in-the-container-layer">The Flaws of storing data in the container layer</a></li><li class="depth-1"><a href="#solution---using-docker-volume" data-for="solution---using-docker-volume">Solution - Using Docker volume</a></li><li class="depth-2"><a href="#what-is-docker-volume" data-for="what-is-docker-volume">What is Docker Volume?</a></li><li class="depth-2"><a href="#lets-create-a-volume" data-for="lets-create-a-volume">Let’s create a volume</a></li><li class="depth-2"><a href="#mount-volume-to-container" data-for="mount-volume-to-container">Mount Volume to container</a></li><li class="depth-2"><a href="#mount-the-same-volume-to-another-container" data-for="mount-the-same-volume-to-another-container">Mount the same volume to another container</a></li><li class="depth-1"><a href="#conclusion" data-for="conclusion">Conclusion</a></li><li class="depth-1"><a href="#references" data-for="references">References</a></li></ul></div></div><div class="backlinks"><h3>Backlinks</h3><ul class="overflow"><li>No backlinks found</li></ul></div></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.3.1</a> © 2024</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></body><script type="application/javascript">function c(){let t=this.parentElement;t.classList.toggle("is-collapsed");let l=t.classList.contains("is-collapsed")?this.scrollHeight:t.scrollHeight;t.style.maxHeight=l+"px";let o=t,e=t.parentElement;for(;e;){if(!e.classList.contains("callout"))return;let n=e.classList.contains("is-collapsed")?e.scrollHeight:e.scrollHeight+o.scrollHeight;e.style.maxHeight=n+"px",o=e,e=e.parentElement}}function i(){let t=document.getElementsByClassName("callout is-collapsible");for(let s of t){let l=s.firstElementChild;if(l){l.addEventListener("click",c),window.addCleanup(()=>l.removeEventListener("click",c));let e=s.classList.contains("is-collapsed")?l.scrollHeight:s.scrollHeight;s.style.maxHeight=e+"px"}}}document.addEventListener("nav",i);window.addEventListener("resize",i);
</script><script type="module">
          let mermaidImport = undefined
          document.addEventListener('nav', async () => {
            if (document.querySelector("code.mermaid")) {
              mermaidImport ||= await import('https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.7.0/mermaid.esm.min.mjs')
              const mermaid = mermaidImport.default
              const darkMode = document.documentElement.getAttribute('saved-theme') === 'dark'
              mermaid.initialize({
                startOnLoad: false,
                securityLevel: 'loose',
                theme: darkMode ? 'dark' : 'default'
              })

              await mermaid.run({
                querySelector: '.mermaid'
              })
            }
          });
          </script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/copy-tex.min.js" type="application/javascript"></script><script src="../../../postscript.js" type="module"></script></html>